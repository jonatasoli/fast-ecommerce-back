============================= test session starts ==============================
platform linux -- Python 3.13.7, pytest-9.0.1, pluggy-1.6.0 -- /home/feanor/workspace/fast-ecommerce-back/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/feanor/workspace/fast-ecommerce-back
configfile: pyproject.toml
plugins: timeout-2.4.0, cov-7.0.0, env-1.2.0, xdist-3.8.0, mock-3.15.1, anyio-4.11.0, ordering-0.6, sugar-1.1.1, asyncio-1.3.0, Faker-38.2.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
collecting ... 2025-12-05 14:18:31.145 | INFO     | app.infra.worker:<module>:5 - amqp://guest:guest@localhost:5672//
2025-12-05 14:18:31.761 | INFO     | main:<module>:85 - Environment: development
collected 124 items

tests/endpoints/cart/test_add_product.py::test_add_product_in_new_cart 2025-12-05T14:18:43.208696+0100 INFO product_db: product_id=1 name='Steve Bradley' uri='wp-content/main' price=Decimal('1E+4') active=True direct_sales=False description=[{'name': 'Jay Jennings', 'residency': '0018 Long Throughway Apt. 081\nThomasberg, ND 17198'}, {'name': 'Katherine Wilson', 'residency': '6436 Kristie Drives Suite 354\nKellyport, GU 57068'}, {'name': 'Alexander Hinton', 'residency': '26152 Jason Turnpike\nCindyport, OH 26428'}, {'name': 'Teresa Reyes', 'residency': '773 Gray Stravenue\nWyattbury, NH 85948'}, {'name': 'Paul Snyder', 'residency': '55351 Darlene Corners Suite 717\nAshleyburgh, CT 51157'}, {'name': 'Jason Williams', 'residency': '5929 Madison Fort Suite 806\nNew Carlos, RI 85151'}, {'name': 'Vanessa Farley', 'residency': 'PSC 1496, Box 3982\nAPO AE 17752'}, {'name': 'Derek Johnson', 'residency': '14123 Gregory Cliff Apt. 462\nRoblesmouth, WI 58648'}, {'name': 'David Tucker', 'residency': '84935 Carla Ports Apt. 321\nJohnathanchester, PR 47984'}, {'name': 'Pamela Hall PhD', 'residency': '312 Rich Rapids Apt. 262\nEast Lisaport, MO 27471'}] image_path=None installments_config=1 installments_list=None discount=None category_id=1 showcase=False show_discount=False height=3949 width=3047 weight=4343 length=1884 diameter=1247 quantity=0 sku='QKwNmixsQbBUjMVkCJOD'
PASSED
tests/endpoints/cart/test_estimate_cart.py::test_estimate_products_in_cart 2025-12-05T14:18:43.329706+0100 INFO b'{"uuid":"8320348c-408d-49b7-92f7-02c6f960d877","affiliate":null,"cart_items":[{"product_id":3,"name":"Jo\xc3\xa3o Gabriel Cassiano","image_path":"categories/blog/categories","quantity":1,"available_quantity":0,"price":"100.00","description":null,"discount_price":"0"},{"product_id":2,"name":"Leonardo Moreira","image_path":"categories/tag","quantity":1,"available_quantity":0,"price":"200.00","description":null,"discount_price":"0"}],"coupon":null,"discount":"0","zipcode":null,"freight_product_code":null,"freight":null,"subtotal":"300.00","total":"0"}'
2025-12-05T14:18:43.343182+0100 DEBUG Search campaign
2025-12-05T14:18:43.343532+0100 DEBUG Query Campaign
2025-12-05T14:18:43.343729+0100 DEBUG 2025-12-05 13:18:43.343714+00:00
2025-12-05T14:18:43.350838+0100 DEBUG Frete None
2025-12-05T14:18:43.351066+0100 DEBUG Preco 0
PASSED
tests/endpoints/catalog/test_categories.py::test_empty_data_should_return_200 PASSED
tests/endpoints/catalog/test_categories.py::test_with_categories_list PASSED
tests/endpoints/catalog/test_category_endpoint.py::test_get_category_by_id_should_return_200 PASSED
tests/endpoints/catalog/test_category_endpoint.py::test_get_category_by_id_not_found_should_return_404 PASSED
tests/endpoints/catalog/test_category_endpoint.py::test_create_category_should_return_201 PASSED
tests/endpoints/catalog/test_category_endpoint.py::test_create_category_without_auth_should_return_401 PASSED
tests/endpoints/catalog/test_category_endpoint.py::test_create_category_invalid_data_should_return_422 PASSED
tests/endpoints/catalog/test_category_endpoint.py::test_update_category_should_return_200 PASSED
tests/endpoints/catalog/test_category_endpoint.py::test_update_category_not_found_should_return_404 PASSED
tests/endpoints/catalog/test_category_endpoint.py::test_delete_category_should_return_204 PASSED
tests/endpoints/catalog/test_category_endpoint.py::test_delete_category_not_found_should_return_404 PASSED
tests/endpoints/catalog/test_category_media_endpoints.py::test_upload_category_image_should_return_200 PASSED
tests/endpoints/catalog/test_category_media_endpoints.py::test_upload_category_image_not_found_should_return_404 PASSED
tests/endpoints/catalog/test_category_media_endpoints.py::test_upload_category_media_gallery_should_return_201 2025-12-05T14:18:45.686219+0100 DEBUG Media id 1
2025-12-05T14:18:45.689305+0100 DEBUG Category Media Gallery id 1
2025-12-05T14:18:45.689580+0100 DEBUG Media id 1
PASSED
tests/endpoints/catalog/test_category_media_endpoints.py::test_get_category_media_gallery_should_return_200 PASSED
tests/endpoints/catalog/test_category_media_endpoints.py::test_delete_category_media_should_return_204 PASSED
tests/endpoints/catalog/test_product_path.py::test_with_product_list_only_category_path 2025-12-05T14:18:46.282188+0100 INFO test
PASSED
tests/endpoints/catalog/test_products_all.py::test_empty_data_should_return_200 PASSED
tests/endpoints/catalog/test_products_all.py::test_with_product_list_only_activated PASSED
tests/endpoints/catalog/test_products_featured.py::test_empty_data_should_return_200 PASSED
tests/endpoints/catalog/test_products_featured.py::test_with_product_list_only_featured PASSED
tests/endpoints/catalog/test_products_latest.py::test_empty_data_should_return_200 PASSED
tests/endpoints/catalog/test_products_latest.py::test_with_product_list_only_last_product PASSED
tests/endpoints/catalog/test_search_product.py::test_empty_data_should_return_200 PASSED
tests/endpoints/catalog/test_search_product.py::test_with_product_list_only_activated PASSED
tests/endpoints/catalog/test_showcase.py::test_empty_data_should_return_200 2025-12-05T14:18:47.149571+0100 DEBUG Currency BRL
PASSED
tests/endpoints/catalog/test_showcase.py::test_with_product_showcase_option_should_list 2025-12-05T14:18:47.214680+0100 DEBUG Currency BRL
PASSED
tests/endpoints/order/test_get_orders.py::test_give_no_orders_should_return_empty_list PASSED
tests/endpoints/order/test_get_orders.py::test_get_all_orders PASSED
tests/endpoints/product/test_create_product_endpoint.py::test_given_valid_payload_should_create_product SKIPPED
tests/endpoints/product/test_upload_image.py::test_add_new_image_file_in_product SKIPPED
tests/endpoints/report/test_sales_commissions.py::test_empty_report_should_empy_list PASSED
tests/endpoints/user/test_token.py::test_get_token SKIPPED
tests/entities/test_cart.py::test_create_uuid_to_cart PASSED
tests/entities/test_cart.py::test_create_base_cart PASSED
tests/entities/test_cart.py::test_increase_product_to_cart PASSED
tests/entities/test_cart.py::test_decrease_product_to_cart PASSED
tests/entities/test_cart.py::test_set_product_quantity_to_cart PASSED
tests/entities/test_cart.py::test_add_product_to_cart PASSED
tests/entities/test_cart.py::test_add_duplicate_product_should_increase_quantity PASSED
tests/entities/test_cart.py::test_remove_product_to_cart PASSED
tests/entities/test_cart.py::test_remove_product_to_cart_with_product_not_exists PASSED2025-12-05T14:18:47.583711+0100 ERROR Product id 2 don't exists in cart

tests/entities/test_cart.py::test_add_product_price_to_cart PASSED
tests/entities/test_cart.py::test_calculate_subtotal_to_cart PASSED
tests/entities/test_cart.py::test_calculate_subtotal_in_cart_without_prices_raise_cart_error PASSED
tests/entities/test_cart.py::test_calculate_subtotal_in_cart_with_cart_items_empty_raise_value_error 2025-12-05T14:18:47.591288+0100 DEBUG Frete None
PASSED2025-12-05T14:18:47.591461+0100 DEBUG Preco 0

tests/entities/test_cart.py::test_calculate_subtotal_in_cart_with_coupon 2025-12-05T14:18:47.593172+0100 ERROR Price or quantity not found in cart item
PASSED2025-12-05T14:18:47.594914+0100 ERROR Cart items is empty

tests/entities/test_catalog.py::test_category_create_valid 2025-12-05T14:18:47.597350+0100 DEBUG Frete None
PASSED2025-12-05T14:18:47.597481+0100 DEBUG Preco 0

tests/entities/test_catalog.py::test_category_create_with_defaults PASSED
tests/entities/test_catalog.py::test_category_create_missing_required_field PASSED
tests/entities/test_catalog.py::test_category_update_partial PASSED
tests/entities/test_catalog.py::test_category_update_all_fields PASSED
tests/entities/test_catalog.py::test_category_response_valid PASSED
tests/entities/test_catalog.py::test_category_model_validate PASSED
tests/entities/test_catalog.py::test_categories_list PASSED
tests/entities/test_category_exception.py::test_category_not_found_error_default_message PASSED
tests/entities/test_category_exception.py::test_category_not_found_error_custom_message PASSED
tests/entities/test_category_exception.py::test_category_not_found_error_is_exception PASSED
tests/entities/test_category_exception.py::test_category_not_found_error_can_be_raised PASSED
tests/entities/test_category_exception.py::test_category_media_not_found_error_default_message PASSED
tests/entities/test_category_exception.py::test_category_media_not_found_error_custom_message PASSED
tests/entities/test_category_exception.py::test_category_media_not_found_error_is_exception PASSED
tests/entities/test_category_exception.py::test_category_media_not_found_error_can_be_raised PASSED
tests/entities/test_product.py::test_uploaded_create_model_should_valid_data PASSED
tests/entities/test_product.py::test_uploaded_create_model_with_invalid_type_should_exception PASSED
tests/models/test_category_db.py::test_create_category PASSED
tests/models/test_category_db.py::test_category_default_values PASSED
tests/models/test_category_db.py::test_category_with_image_path PASSED
tests/models/test_category_media_gallery_db.py::test_create_category_media_gallery PASSED
tests/models/test_category_media_gallery_db.py::test_category_media_gallery_foreign_keys PASSED
tests/models/test_orderdb_model.py::test_create_order PASSED
tests/models/test_orderdb_model.py::test_order_status_steps PASSED
tests/models/test_role.py::test_create_role PASSED
tests/models/test_uploaded_image.py::test_create_media PASSED
tests/models/test_userdb.py::test_create_user PASSED
tests/repository/users/test_get_users.py::test_get_users_with_name_filter PASSED
tests/repository/users/test_get_users.py::test_get_users_with_document_filter PASSED
tests/repository/users/test_get_users.py::test_get_users_with_ordering_and_pagination PASSED
tests/repository/users/test_get_users.py::test_get_users_no_filters PASSED
tests/services/cart/test_cart_estimate.py::test_estimate_cart_with_product 2025-12-05T14:18:48.139567+0100 INFO {"uuid":"0c517c50-91da-43db-bc5c-9f66655c8ffd","affiliate":null,"cart_items":[{"product_id":1,"name":"Dra. Stella Fogaça","image_path":"categories","quantity":1,"available_quantity":10,"price":null,"description":null,"discount_price":"0"},{"product_id":2,"name":"Bruno Abreu","image_path":"posts","quantity":1,"available_quantity":10,"price":null,"description":null,"discount_price":"0"}],"coupon":null,"discount":"0","zipcode":null,"freight_product_code":null,"freight":null,"subtotal":"10","total":"0"}
2025-12-05T14:18:48.140407+0100 DEBUG Search campaign
2025-12-05T14:18:48.140529+0100 DEBUG Query Campaign
2025-12-05T14:18:48.140608+0100 DEBUG 2025-12-05 13:18:48.140601+00:00
PASSED2025-12-05T14:18:48.182276+0100 DEBUG Frete None
2025-12-05T14:18:48.182446+0100 DEBUG Preco 0

tests/services/cart/test_cart_estimate.py::test_estimate_cart_with_coupon_discount 2025-12-05T14:18:48.306901+0100 INFO {"uuid":"8b61fc61-6d31-4113-afa9-9b10d40c9df7","affiliate":null,"cart_items":[{"product_id":1,"name":"Pedro Henrique Marques","image_path":"wp-content/explore","quantity":1,"available_quantity":10,"price":null,"description":null,"discount_price":"0"},{"product_id":2,"name":"Luiz Henrique Araújo","image_path":"search/explore/search","quantity":1,"available_quantity":10,"price":null,"description":null,"discount_price":"0"}],"coupon":"D10","discount":"0","zipcode":null,"freight_product_code":null,"freight":null,"subtotal":"10","total":"0"}
2025-12-05T14:18:48.308196+0100 DEBUG Search campaign
2025-12-05T14:18:48.308354+0100 DEBUG Query Campaign
2025-12-05T14:18:48.308463+0100 DEBUG 2025-12-05 13:18:48.308454+00:00
PASSED2025-12-05T14:18:48.352498+0100 DEBUG Frete None
2025-12-05T14:18:48.352672+0100 DEBUG Preco 0

tests/services/cart/test_cart_step_1.py::test_add_product_to_new_cart PASSED2025-12-05T14:18:48.386523+0100 INFO product_db: <app.infra.models.ProductDB object at 0x7f3a19792f50>
2025-12-05T14:18:48.386694+0100 DEBUG Product values <app.infra.models.ProductDB object at 0x7f3a19792f50>

tests/services/cart/test_cart_step_1.py::test_add_product_to_new_cart_should_set_in_cache PASSED2025-12-05T14:18:48.457570+0100 INFO product_db: <app.infra.models.ProductDB object at 0x7f3a19792650>
2025-12-05T14:18:48.457764+0100 DEBUG Product values <app.infra.models.ProductDB object at 0x7f3a19792650>

tests/services/cart/test_cart_step_1.py::test_add_product_to_current_cart_should_add_new_product_should_calculate_subtotal PASSED2025-12-05T14:18:48.533512+0100 INFO product_db: <app.infra.models.ProductDB object at 0x7f3a19793450>

tests/services/cart/test_cart_step_1.py::test_given_cart_with_items_with_discount_need_calculate_to_preview 2025-12-05T14:18:48.610704+0100 INFO {"uuid":"63a2a20b-84b0-461f-a2c2-41d0ea9b5641","affiliate":null,"cart_items":[{"product_id":2,"name":"Ana Laura Cassiano","image_path":"search/app","quantity":1,"available_quantity":10,"price":null,"description":null,"discount_price":"50"},{"product_id":1,"name":"Cecilia Vasconcelos","image_path":"explore","quantity":1,"available_quantity":10,"price":null,"description":null,"discount_price":"50"}],"coupon":null,"discount":"0","zipcode":null,"freight_product_code":null,"freight":null,"subtotal":"10","total":"0"}
2025-12-05T14:18:48.611794+0100 DEBUG Search campaign
2025-12-05T14:18:48.611992+0100 DEBUG Query Campaign
2025-12-05T14:18:48.612081+0100 DEBUG 2025-12-05 13:18:48.612073+00:00
PASSED2025-12-05T14:18:48.659999+0100 DEBUG Frete None
2025-12-05T14:18:48.660304+0100 DEBUG Preco 0

tests/services/catalog/test_category_media_services.py::test_upload_category_image_should_update_image_path PASSED
tests/services/catalog/test_category_media_services.py::test_upload_category_image_not_found_should_raise_exception PASSED
tests/services/catalog/test_category_media_services.py::test_upload_category_media_gallery_should_upload_photo 2025-12-05T14:18:49.028446+0100 DEBUG Media id 3
2025-12-05T14:18:49.031588+0100 DEBUG Category Media Gallery id 3
2025-12-05T14:18:49.031848+0100 DEBUG Media id 3
PASSED
tests/services/catalog/test_category_media_services.py::test_upload_category_media_gallery_category_not_found_should_raise PASSED
tests/services/catalog/test_category_media_services.py::test_get_category_media_gallery_should_return_media_list PASSED
tests/services/catalog/test_category_media_services.py::test_get_category_media_gallery_category_not_found_should_raise PASSED
tests/services/catalog/test_category_media_services.py::test_delete_category_media_gallery_should_delete_media PASSED
tests/services/catalog/test_category_media_services.py::test_delete_category_media_gallery_category_not_found_should_raise PASSED
tests/services/catalog/test_category_media_services.py::test_delete_category_media_gallery_media_not_found_should_raise PASSED
tests/services/catalog/test_category_services.py::test_create_category_should_return_category PASSED
tests/services/catalog/test_category_services.py::test_get_category_by_id_should_return_category PASSED
tests/services/catalog/test_category_services.py::test_get_category_by_id_not_found_should_return_none PASSED
tests/services/catalog/test_category_services.py::test_update_category_should_return_updated_category PASSED
tests/services/catalog/test_category_services.py::test_update_category_not_found_should_return_none PASSED
tests/services/catalog/test_category_services.py::test_delete_category_should_return_true FAILED

=================================== FAILURES ===================================
___________________ test_delete_category_should_return_true ____________________

asyncdb = async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.engine.AsyncEngine object at 0x7f3a19b3af90>, autoflush=True, expire_on_commit=False)

    @pytest.mark.asyncio
    async def test_delete_category_should_return_true(asyncdb):
        """Should delete category."""
        # Arrange
        async with asyncdb().begin() as transaction:
            category = CategoryFactory()
            config_fee = CreditCardFeeConfigFactory()
            transaction.session.add_all([category, config_fee])
            await transaction.session.commit()
    
        # Act
        result = await delete_category(category.category_id, db=asyncdb)
    
        # Assert
>       assert result is True
E       assert None is True

tests/services/catalog/test_category_services.py:131: AssertionError
=============================== warnings summary ===============================
.venv/lib/python3.13/site-packages/testcontainers/core/waiting_utils.py:215
  /home/feanor/workspace/fast-ecommerce-back/.venv/lib/python3.13/site-packages/testcontainers/core/waiting_utils.py:215: DeprecationWarning: The @wait_container_is_ready decorator is deprecated and will be removed in a future version. Use structured wait strategies instead: container.waiting_for(HttpWaitStrategy(8080).for_status_code(200)) or container.waiting_for(LogMessageWaitStrategy('ready'))
    @wait_container_is_ready()

.venv/lib/python3.13/site-packages/testcontainers/postgres/__init__.py:90
  /home/feanor/workspace/fast-ecommerce-back/.venv/lib/python3.13/site-packages/testcontainers/postgres/__init__.py:90: DeprecationWarning: The @wait_container_is_ready decorator is deprecated and will be removed in a future version. Use structured wait strategies instead: container.waiting_for(HttpWaitStrategy(8080).for_status_code(200)) or container.waiting_for(LogMessageWaitStrategy('ready'))
    @wait_container_is_ready()

.venv/lib/python3.13/site-packages/testcontainers/redis/__init__.py:46
  /home/feanor/workspace/fast-ecommerce-back/.venv/lib/python3.13/site-packages/testcontainers/redis/__init__.py:46: DeprecationWarning: The @wait_container_is_ready decorator is deprecated and will be removed in a future version. Use structured wait strategies instead: container.waiting_for(HttpWaitStrategy(8080).for_status_code(200)) or container.waiting_for(LogMessageWaitStrategy('ready'))
    @wait_container_is_ready(redis.exceptions.ConnectionError)

.venv/lib/python3.13/site-packages/dynaconf/base.py:167
  /home/feanor/workspace/fast-ecommerce-back/.venv/lib/python3.13/site-packages/dynaconf/base.py:167: DeprecationWarning: Usage of `from dynaconf import settings` is now DEPRECATED in 3.0.0+. You are encouraged to change it to your own instance e.g: `settings = Dynaconf(*options)`
    warnings.warn(

tests/endpoints/cart/test_add_product.py::test_add_product_in_new_cart
  /home/feanor/workspace/fast-ecommerce-back/.venv/lib/python3.13/site-packages/factory/base.py:509: SAWarning: relationship 'OrderDB.order_items' will copy column order.order_id to column order_items.order_id, which conflicts with relationship(s): 'OrderItemsDB.orders' (copies order.order_id to order_items.order_id). If this is not the intention, consider if these relationships should be linked with back_populates, or if viewonly=True should be applied to one or more if they are read-only. For the less common case that foreign key constraints are partially overlapping, the orm.foreign() annotation can be used to isolate the columns that should be written towards.   To silence this warning, add the parameter 'overlaps="orders"' to the 'OrderDB.order_items' relationship. (Background on this warning at: https://sqlalche.me/e/20/qzyx) (This warning originated from the `configure_mappers()` process, which was invoked automatically in response to a user-initiated operation.)
    return model_class(*args, **kwargs)

tests/endpoints/catalog/test_category_endpoint.py::test_create_category_invalid_data_should_return_422
  /usr/lib/python3.13/asyncio/events.py:89: DeprecationWarning: 'HTTP_422_UNPROCESSABLE_ENTITY' is deprecated. Use 'HTTP_422_UNPROCESSABLE_CONTENT' instead.
    self._context.run(self._callback, *self._args)

tests/repository/users/test_get_users.py::test_get_users_no_filters
  /home/feanor/workspace/fast-ecommerce-back/.venv/lib/python3.13/site-packages/psycopg/_queries.py:355: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x7f3a199b4040>
    pre = query[cur : m.span(0)[0]]
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/repository/users/test_get_users.py::test_get_users_no_filters
  /home/feanor/workspace/fast-ecommerce-back/.venv/lib/python3.13/site-packages/psycopg/_queries.py:355: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x7f3a199b62f0>
    pre = query[cur : m.span(0)[0]]
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/repository/users/test_get_users.py::test_get_users_no_filters
  /home/feanor/workspace/fast-ecommerce-back/.venv/lib/python3.13/site-packages/psycopg/_queries.py:355: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x7f3a199b7d30>
    pre = query[cur : m.span(0)[0]]
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/repository/users/test_get_users.py::test_get_users_no_filters
  /home/feanor/workspace/fast-ecommerce-back/.venv/lib/python3.13/site-packages/psycopg/_queries.py:355: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x7f3a196f9a80>
    pre = query[cur : m.span(0)[0]]
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/repository/users/test_get_users.py::test_get_users_no_filters
  /home/feanor/workspace/fast-ecommerce-back/.venv/lib/python3.13/site-packages/psycopg/_queries.py:355: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x7f3a19612200>
    pre = query[cur : m.span(0)[0]]
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/services/cart/test_cart_estimate.py::test_estimate_cart_with_product
tests/services/cart/test_cart_estimate.py::test_estimate_cart_with_coupon_discount
  /home/feanor/workspace/fast-ecommerce-back/.venv/lib/python3.13/site-packages/pydantic/main.py:528: UserWarning: Pydantic serializer warnings:
    PydanticSerializationUnexpectedValue(Expected `decimal` - serialized value may not be as expected [field_name='price', input_value=3440, input_type=int])
    PydanticSerializationUnexpectedValue(Expected `decimal` - serialized value may not be as expected [field_name='price', input_value=3440, input_type=int])
    return self.__pydantic_serializer__.to_json(

tests/services/cart/test_cart_estimate.py::test_estimate_cart_with_product
  /usr/lib/python3.13/weakref.py:415: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x7f3a196f8040>
    return self.data[ref(key)]
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/services/cart/test_cart_estimate.py::test_estimate_cart_with_product
  /usr/lib/python3.13/weakref.py:415: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x7f3a196fb5b0>
    return self.data[ref(key)]
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/services/cart/test_cart_estimate.py::test_estimate_cart_with_product
  /usr/lib/python3.13/weakref.py:415: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x7f3a196107c0>
    return self.data[ref(key)]
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/services/cart/test_cart_estimate.py::test_estimate_cart_with_product
  /usr/lib/python3.13/weakref.py:415: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x7f3a19613c40>
    return self.data[ref(key)]
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/services/cart/test_cart_estimate.py::test_estimate_cart_with_product
  /usr/lib/python3.13/weakref.py:415: ResourceWarning: unclosed database in <sqlite3.Connection object at 0x7f3a19612e30>
    return self.data[ref(key)]
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/services/catalog/test_category_services.py::test_delete_category_should_return_true - assert None is True
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!
============ 1 failed, 98 passed, 3 skipped, 18 warnings in 20.42s =============
make: *** [Makefile:41: test] Error 1
